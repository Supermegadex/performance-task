<!DOCTYPE html>
<html lang="en-us">

<head>
  <meta charset="utf-8">
  <title>Jupiter</title>
  <link rel="stylesheet" href="tingle/tingle.min.css">
  <link rel="stylesheet" href="prism/prism.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
  <link rel="stylesheet" href="app.css">
</head>

<body>

  <div class="wrapper">
    <canvas id="canvas" width="320" height="568"></canvas>
    <img src="img/frame.png" id="frame" height="784" width="374" />
  </div>

  <footer id="footer">
    <h1 class="jupiter">Jupiter</h1>
    <h3 class="names">Keegan Brown, Aidan Buechler, Daniel Noon</h3>
    <button onclick="modal.open();" class="btn btn-light btn-lg code-btn">Show me some code!</button>
  </footer>

  <script src="tingle/tingle.min.js"></script>
  <script src="prism/prism.js"></script>
  <script src="app.js"></script>
  <script>
    /* global tingle fetch Prism */
    
    var modal = new tingle.modal({
        footer: true,
        stickyFooter: true,
        closeMethods: ['overlay', 'button', 'escape'],
        closeLabel: "Close",
        cssClass: ['custom-class-1', 'custom-class-2'],
        onOpen: function() {
            console.log('modal open');
            loadFile("scripts/scene/main.js");
        },
        onClose: function() {
            console.log('modal closed');
        },
        beforeClose: function() {
            return true;
        }
    });

    function loadFile(path) {
      fetch(path).then((data) => {
        data.text(path).then((js) => {
          modal.setContent(`<pre><code class="language-javscript">${Prism.highlight(js, Prism.languages.javascript)}</code></pre>`);
          modal.checkOverflow();
        });
      });
    }
    
    modal.setContent('<h1 style="color: white">Loading...</h1>');
    
    modal.addFooterBtn('main.js', 'tingle-btn tingle-btn--primary', function() {
      loadFile("scripts/scene/main.js");
    });

    modal.addFooterBtn('lib.js', 'tingle-btn tingle-btn--primary', function () {
      loadFile("scripts/scene/daniel/lib.js");
    });

    modal.addFooterBtn('space.js', 'tingle-btn tingle-btn--primary', function () {
      loadFile("scripts/scene/keegan/k.js");
    });

    modal.addFooterBtn('jupiter.js', 'tingle-btn tingle-btn--primary', function () {
      loadFile("scripts/scene/aidan/jupiter.js");
    });
    
    modal.addFooterBtn('storm.js', 'tingle-btn tingle-btn--primary', function () {
      loadFile("scripts/scene/daniel/storm.js");
    });
    
  </script>
</body>

</html>